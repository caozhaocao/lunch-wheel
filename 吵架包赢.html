<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åµæ¶åŒ…èµ¢ - è®©ä½ è¾©è®ºæ— æ•Œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* å¾®ä¿¡é£æ ¼é…è‰² */
        :root {
            --wechat-green: #07C160;
            --wechat-green-hover: #06AD56;
            --wechat-bg: #EDEDED;
            --wechat-white: #FFFFFF;
            --wechat-black: #191919;
            --wechat-gray: #909399;
        }
        
        body {
            background-color: var(--wechat-bg);
        }
        
        /* æ»‘å—æ ·å¼ */
        .slider {
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            background: #E0E0E0;
            outline: none;
            opacity: 0.7;
            transition: opacity 0.2s;
            border-radius: 4px;
        }
        
        .slider:hover {
            opacity: 1;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: var(--wechat-green);
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            background: var(--wechat-green);
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .reply-item {
            animation: slideIn 0.3s ease-out;
        }
        
        /* å¤åˆ¶æŒ‰é’®æ ·å¼ */
        .copy-btn {
            transition: all 0.2s;
        }
        
        .copy-btn:hover {
            background-color: var(--wechat-green);
            color: white;
        }
        
        .copy-btn.copied {
            background-color: var(--wechat-green);
            color: white;
        }
        
        /* ç«ç„°æ•ˆæœ */
        .fire-emoji {
            display: inline-block;
            animation: burn 0.5s ease-in-out infinite alternate;
        }
        
        @keyframes burn {
            from { transform: scale(1) rotate(-5deg); }
            to { transform: scale(1.1) rotate(5deg); }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-md bg-white rounded-2xl shadow-xl p-6 md:p-8">
        <!-- æ ‡é¢˜ -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">
                <span class="fire-emoji">ğŸ”¥</span> åµæ¶åŒ…èµ¢ <span class="fire-emoji">ğŸ”¥</span>
            </h1>
            <p class="text-gray-600">è®©ä½ åœ¨ä»»ä½•è¾©è®ºä¸­å æ®ä¸Šé£</p>
        </div>
        
        <!-- è¾“å…¥åŒºåŸŸ -->
        <div class="space-y-6">
            <!-- å¯¹æ–¹çš„è¯è¾“å…¥æ¡† -->
            <div>
                <label for="opponentText" class="block text-sm font-medium text-gray-700 mb-2">
                    å¯¹æ–¹è¯´äº†ä»€ä¹ˆï¼Ÿ
                </label>
                <textarea
                    id="opponentText"
                    rows="3"
                    class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none"
                    placeholder="è¾“å…¥å¯¹æ–¹çš„è¯..."
                ></textarea>
            </div>
            
            <!-- è¯­æ°”å¼ºåº¦é€‰æ‹© -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    è¯­æ°”å¼ºçƒˆç¨‹åº¦
                    <span id="intensityValue" class="ml-2 text-green-600 font-bold">5</span>
                </label>
                <div class="flex items-center space-x-3">
                    <span class="text-sm text-gray-500">ğŸ˜Š</span>
                    <input
                        type="range"
                        id="intensitySlider"
                        min="1"
                        max="10"
                        value="5"
                        class="slider flex-1"
                    >
                    <span class="text-sm text-gray-500">ğŸ˜¤</span>
                </div>
                <div class="flex justify-between mt-1 px-12">
                    <span class="text-xs text-gray-400">æ¸©å’Œ</span>
                    <span class="text-xs text-gray-400">å¼ºçƒˆ</span>
                </div>
            </div>
            
            <!-- å¼€å§‹æŒ‰é’® -->
            <button
                id="generateBtn"
                class="w-full py-4 bg-green-500 hover:bg-green-600 text-white font-bold text-lg rounded-lg shadow-lg transform transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-green-300"
                style="background-color: var(--wechat-green);"
                onmouseover="this.style.backgroundColor='var(--wechat-green-hover)'"
                onmouseout="this.style.backgroundColor='var(--wechat-green)'"
            >
                âš”ï¸ å¼€å§‹åµæ¶
            </button>
        </div>
        
        <!-- å›å¤ç»“æœåŒºåŸŸ -->
        <div id="repliesContainer" class="mt-8 space-y-4 hidden">
            <h3 class="text-lg font-semibold text-gray-800">ğŸ’ª å®Œç¾å›å‡»ï¼š</h3>
            <div id="repliesList" class="space-y-3"></div>
        </div>
        
        <!-- å†å²è®°å½•æŒ‰é’® -->
        <div class="mt-6 text-center">
            <button
                id="historyBtn"
                class="text-sm text-gray-600 hover:text-green-600 transition-colors"
            >
                ğŸ“œ æŸ¥çœ‹å†å²è®°å½•
            </button>
        </div>
    </div>
    
    <!-- å†å²è®°å½•æ¨¡æ€æ¡† -->
    <div id="historyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50">
        <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-bold text-gray-800">ğŸ“œ å†å²è®°å½•</h3>
                    <button
                        id="closeHistoryBtn"
                        class="text-gray-400 hover:text-gray-600 text-2xl"
                    >
                        Ã—
                    </button>
                </div>
            </div>
            <div id="historyContent" class="p-6 overflow-y-auto max-h-[60vh]">
                <!-- å†å²è®°å½•å†…å®¹ -->
            </div>
            <div class="p-4 border-t border-gray-200">
                <button
                    id="clearHistoryBtn"
                    class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm"
                >
                    ğŸ—‘ï¸ æ¸…ç©ºå†å²
                </button>
            </div>
        </div>
    </div>

    <script>
        // DOM å…ƒç´ 
        const opponentTextEl = document.getElementById('opponentText');
        const intensitySliderEl = document.getElementById('intensitySlider');
        const intensityValueEl = document.getElementById('intensityValue');
        const generateBtnEl = document.getElementById('generateBtn');
        const repliesContainerEl = document.getElementById('repliesContainer');
        const repliesListEl = document.getElementById('repliesList');
        const historyBtnEl = document.getElementById('historyBtn');
        const historyModalEl = document.getElementById('historyModal');
        const closeHistoryBtnEl = document.getElementById('closeHistoryBtn');
        const historyContentEl = document.getElementById('historyContent');
        const clearHistoryBtnEl = document.getElementById('clearHistoryBtn');
        
        // å›å¤æ¨¡æ¿åº“
        const replyTemplates = {
            low: [ // è¯­æ°” 1-3
                "æˆ‘ç†è§£ä½ çš„è§‚ç‚¹ï¼Œä½†æ˜¯{reason}ï¼Œæ‰€ä»¥{conclusion}ã€‚",
                "æˆ–è®¸ä½ è¯´çš„æœ‰ä¸€å®šé“ç†ï¼Œä¸è¿‡{reason}ï¼Œå› æ­¤{conclusion}ã€‚",
                "è¿™ä¸ªé—®é¢˜å¯ä»¥ä»å¦ä¸€ä¸ªè§’åº¦çœ‹ï¼Œ{reason}ï¼Œè¿™æ ·{conclusion}ã€‚"
            ],
            medium: [ // è¯­æ°” 4-7
                "ä½ è¿™è¯è¯´å¾—æ¯«æ— é€»è¾‘ï¼Œ{reason}ï¼Œæ˜¾ç„¶{conclusion}ã€‚",
                "éº»çƒ¦ä½ åŠ¨åŠ¨è„‘å­æƒ³æƒ³ï¼Œ{reason}ï¼Œæ‰€ä»¥{conclusion}ã€‚",
                "æˆ‘çœŸæ˜¯æœäº†ï¼Œ{reason}ï¼Œè¿™éƒ½ä¸æ˜ç™½å—ï¼Ÿ{conclusion}ã€‚"
            ],
            high: [ // è¯­æ°” 8-10
                "ä½ æ˜¯è®¤çœŸçš„å—ï¼Ÿ{reason}ï¼Œ{conclusion}ï¼Œå»ºè®®ä½ å›å»å¥½å¥½å­¦ä¹ ä¸€ä¸‹ï¼",
                "ç¬‘æ­»æˆ‘äº†ï¼Œ{reason}ï¼Œ{conclusion}ï¼Œè¿™æ™ºå•†çœŸè®©äººç€æ€¥ã€‚",
                "å¬å›ä¸€å¸­è¯ï¼Œå¦‚å¬ä¸€å¸­è¯ã€‚{reason}ï¼Œ{conclusion}ï¼Œæ‹œæ‰˜é•¿ç‚¹è„‘å­å¥½å—ï¼Ÿ"
            ]
        };
        
        // ç†ç”±å’Œç»“è®ºåº“
        const reasons = [
            "ä»»ä½•æœ‰åŸºæœ¬å¸¸è¯†çš„äººéƒ½çŸ¥é“è¿™ä¸ªé“ç†",
            "è¿™æ˜¯æœ€åŸºæœ¬çš„é€»è¾‘æ€ç»´",
            "ç¨å¾®æŸ¥æŸ¥èµ„æ–™å°±èƒ½æ˜ç™½",
            "ä»å„ä¸ªè§’åº¦åˆ†æéƒ½èƒ½å¾—å‡ºè¿™ä¸ªç»“è®º",
            "è¿™å·²ç»è¢«æ— æ•°äº‹å®è¯æ˜äº†",
            "è¿å°å­¦ç”Ÿéƒ½èƒ½ç†è§£è¿™ä¸ªé—®é¢˜",
            "å†å²å’Œç°å®éƒ½å‘Šè¯‰æˆ‘ä»¬",
            "ç”¨æœ€ç®€å•çš„æ¨ç†å°±èƒ½çŸ¥é“"
        ];
        
        const conclusions = [
            "ä½ çš„è§‚ç‚¹å®Œå…¨ç«™ä¸ä½è„š",
            "è¿™ç§è®ºè°ƒç®€ç›´æ˜¯è´»ç¬‘å¤§æ–¹",
            "ä½ éœ€è¦é‡æ–°å®¡è§†è¿™ä¸ªé—®é¢˜",
            "è¿™ç§æƒ³æ³•å®åœ¨æ˜¯å¤ªå¤©çœŸäº†",
            "ä½ çš„ç†è§£å­˜åœ¨æ ¹æœ¬æ€§é”™è¯¯",
            "è¿™ç§è§‚ç‚¹ç¼ºä¹åŸºæœ¬çš„è®¤çŸ¥",
            "ä½ å®Œå…¨æ›²è§£äº†äº‹å®",
            "å»ºè®®ä½ å¤šè¯»ä¹¦å¤šçœ‹æŠ¥"
        ];
        
        // æ›´æ–°è¯­æ°”å¼ºåº¦æ˜¾ç¤º
        intensitySliderEl.addEventListener('input', () => {
            intensityValueEl.textContent = intensitySliderEl.value;
        });
        
        // ç”Ÿæˆå›å¤
        const generateReplies = () => {
            const opponentText = opponentTextEl.value.trim();
            if (!opponentText) {
                alert('è¯·è¾“å…¥å¯¹æ–¹çš„è¯ï¼');
                return;
            }
            
            const intensity = parseInt(intensitySliderEl.value);
            let templates;
            
            if (intensity <= 3) {
                templates = replyTemplates.low;
            } else if (intensity <= 7) {
                templates = replyTemplates.medium;
            } else {
                templates = replyTemplates.high;
            }
            
            // ç”Ÿæˆ3æ¡ä¸åŒçš„å›å¤
            const replies = [];
            const usedTemplates = new Set();
            
            while (replies.length < 3) {
                const templateIndex = Math.floor(Math.random() * templates.length);
                if (usedTemplates.has(templateIndex)) continue;
                usedTemplates.add(templateIndex);
                
                const template = templates[templateIndex];
                const reason = reasons[Math.floor(Math.random() * reasons.length)];
                const conclusion = conclusions[Math.floor(Math.random() * conclusions.length)];
                
                const reply = template
                    .replace('{reason}', reason)
                    .replace('{conclusion}', conclusion);
                
                replies.push(reply);
            }
            
            // æ˜¾ç¤ºå›å¤
            displayReplies(replies);
            
            // ä¿å­˜åˆ°å†å²è®°å½•
            saveToHistory(opponentText, intensity, replies);
        };
        
        // æ˜¾ç¤ºå›å¤
        const displayReplies = (replies) => {
            repliesListEl.innerHTML = '';
            
            replies.forEach((reply, index) => {
                const replyEl = document.createElement('div');
                replyEl.className = 'reply-item bg-gray-50 p-4 rounded-lg border border-gray-200';
                replyEl.style.animationDelay = `${index * 0.1}s`;
                
                replyEl.innerHTML = `
                    <div class="flex justify-between items-start">
                        <p class="text-gray-800 flex-1 mr-2">${reply}</p>
                        <button
                            class="copy-btn px-3 py-1 text-sm bg-gray-200 hover:bg-green-500 hover:text-white rounded transition-colors"
                            onclick="copyToClipboard('${reply.replace(/'/g, "\\'")}', this)"
                        >
                            ğŸ“‹ å¤åˆ¶
                        </button>
                    </div>
                `;
                
                repliesListEl.appendChild(replyEl);
            });
            
            repliesContainerEl.classList.remove('hidden');
        };
        
        // å¤åˆ¶åˆ°å‰ªè´´æ¿
        const copyToClipboard = (text, button) => {
            navigator.clipboard.writeText(text).then(() => {
                button.textContent = 'âœ… å·²å¤åˆ¶';
                button.classList.add('copied');
                setTimeout(() => {
                    button.textContent = 'ğŸ“‹ å¤åˆ¶';
                    button.classList.remove('copied');
                }, 2000);
            });
        };
        
        // ä¿å­˜åˆ°å†å²è®°å½•
        const saveToHistory = (opponentText, intensity, replies) => {
            const history = JSON.parse(localStorage.getItem('argumentHistory') || '[]');
            const newItem = {
                timestamp: Date.now(),
                opponentText,
                intensity,
                replies
            };
            
            history.unshift(newItem);
            if (history.length > 50) history.pop(); // æœ€å¤šä¿å­˜50æ¡
            
            localStorage.setItem('argumentHistory', JSON.stringify(history));
        };
        
        // æ˜¾ç¤ºå†å²è®°å½•
        const showHistory = () => {
            const history = JSON.parse(localStorage.getItem('argumentHistory') || '[]');
            
            if (history.length === 0) {
                historyContentEl.innerHTML = '<p class="text-gray-500 text-center">æš‚æ— å†å²è®°å½•</p>';
            } else {
                historyContentEl.innerHTML = history.map(item => `
                    <div class="mb-6 pb-6 border-b border-gray-200 last:border-0">
                        <div class="text-sm text-gray-500 mb-2">
                            ${new Date(item.timestamp).toLocaleString()} | å¼ºåº¦ï¼š${item.intensity}
                        </div>
                        <div class="mb-3">
                            <span class="font-semibold">å¯¹æ–¹ï¼š</span>${item.opponentText}
                        </div>
                        <div class="space-y-2">
                            ${item.replies.map(reply => `
                                <div class="bg-gray-50 p-3 rounded text-sm">${reply}</div>
                            `).join('')}
                        </div>
                    </div>
                `).join('');
            }
            
            historyModalEl.classList.remove('hidden');
            historyModalEl.classList.add('flex');
        };
        
        // å…³é—­å†å²è®°å½•
        const closeHistory = () => {
            historyModalEl.classList.add('hidden');
            historyModalEl.classList.remove('flex');
        };
        
        // æ¸…ç©ºå†å²è®°å½•
        const clearHistory = () => {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•å—ï¼Ÿ')) {
                localStorage.removeItem('argumentHistory');
                showHistory(); // é‡æ–°æ˜¾ç¤ºç©ºçš„å†å²è®°å½•
            }
        };
        
        // äº‹ä»¶ç›‘å¬
        generateBtnEl.addEventListener('click', generateReplies);
        historyBtnEl.addEventListener('click', showHistory);
        closeHistoryBtnEl.addEventListener('click', closeHistory);
        clearHistoryBtnEl.addEventListener('click', clearHistory);
        
        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        historyModalEl.addEventListener('click', (e) => {
            if (e.target === historyModalEl) {
                closeHistory();
            }
        });
        
        // å›è½¦é”®ç”Ÿæˆå›å¤
        opponentTextEl.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && e.ctrlKey) {
                e.preventDefault();
                generateReplies();
            }
        });
        
        // å°†å‡½æ•°æš´éœ²åˆ°å…¨å±€ä½œç”¨åŸŸä»¥ä¾› onclick ä½¿ç”¨
        window.copyToClipboard = copyToClipboard;
    </script>
</body>
</html> 